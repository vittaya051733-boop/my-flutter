# ЁЯзк р╕Др╕╣р╣Ир╕бр╕╖р╕нр╕Чр╕Фр╕кр╕нр╕Ър╕гр╕░р╕Ър╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣М (Order Management Testing Guide)

## ЁЯУЛ р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Хр╣Йр╕нр╕Зр╣Ар╕Хр╕гр╕╡р╕вр╕б
- тЬЕ р╣Бр╕нр╕Юр╕гр╕▒р╕Щр╕Ър╕Щр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣Мр╕лр╕гр╕╖р╕н emulator
- тЬЕ Login р╣Ар╕Вр╣Йр╕▓р╕гр╕░р╕Ър╕Ър╕Фр╣Йр╕зр╕в account р╕Чр╕╡р╣Ир╣Ар╕Ыр╣Зр╕Щр╕гр╣Йр╕▓р╕Щр╕Др╣Йр╕▓
- тЬЕ р╣Ар╕Ыр╕┤р╕Ф Firebase Console (Firestore) р╣Др╕зр╣Йр╕Фр╕╣р╕Вр╣Йр╕нр╕бр╕╣р╕е: https://console.firebase.google.com/project/vanmarket-50d9d/firestore
- тЬЕ р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓ Order Management р╣Гр╕Щр╣Бр╕нр╕Ю (р╕Ыр╕╕р╣Ир╕бр╕Чр╕╡р╣И 3 р╕Ир╕▓р╕Бр╕Лр╣Йр╕▓р╕в - р╣Др╕нр╕Др╕нр╕Щ receipt)

---

## ЁЯОп р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕Фр╕кр╕нр╕Ъ

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 1: р╕кр╕гр╣Йр╕▓р╕Зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Чр╕Фр╕кр╕нр╕Ъ

1. **р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓ Order Management**
   - р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б ЁЯУЭ (receipt icon) р╣Гр╕Щр╣Ар╕бр╕Щр╕╣р╕ер╣Ир╕▓р╕З
   - р╕Ир╕░р╣Ар╕лр╣Зр╕Щр╕лр╕Щр╣Йр╕▓ "р╕Ир╕▒р╕Фр╕Бр╕▓р╕гр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М"

2. **р╕кр╕гр╣Йр╕▓р╕Зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Чр╕Фр╕кр╕нр╕Ъ**
   - р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б тЮХ (add_circle_outline) р╕бр╕╕р╕бр╕Вр╕зр╕▓р╕Ър╕Щ
   - р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б "тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Чр╕Фр╕кр╕нр╕Ър╕кр╕│р╣Ар╕гр╣Зр╕И: xxxxxxxx..."
   - р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╣Гр╕лр╕бр╣Ир╕Ир╕░р╕Ыр╕гр╕▓р╕Бр╕Пр╣Гр╕Щр╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Чр╕▒р╕Щр╕Чр╕╡

3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Вр╣Йр╕нр╕бр╕╣р╕ер╕нр╕нр╣Ар╕Фр╕нр╕гр╣М**
   - р╕нр╕нр╣Ар╕Фр╕нр╕гр╣М ID: р╣Бр╕кр╕Фр╕Зр╣Гр╕Щр╕гр╕╣р╕Ыр╣Бр╕Ър╕Ъ `ORD-xxxxxxxx`
   - р╕кр╕Цр╕▓р╕Щр╕░: **р╕гр╕нр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤** (р╕кр╕╡р╕кр╣Йр╕б)
   - р╕ер╕╣р╕Бр╕Др╣Йр╕▓: р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕Чр╕Фр╕кр╕нр╕Ъ
   - р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕кр╕┤р╕Щр╕Др╣Йр╕▓:
     - р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕Фр╕кр╕нр╕Ъ 1 x2 (р╕┐50)
     - р╕кр╕┤р╕Щр╕Др╣Йр╕▓р╕Чр╕Фр╕кр╕нр╕Ъ 2 x1 (р╕┐100)
   - р╕вр╕нр╕Фр╕гр╕зр╕б: р╕┐230 (р╕гр╕зр╕бр╕Др╣Ир╕▓р╕кр╣Ир╕З)
   - р╕Ыр╕╕р╣Ир╕б: **р╕гр╕▒р╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣М** (р╣Ар╕Вр╕╡р╕вр╕з) р╣Бр╕ер╕░ **р╕Ыр╕Пр╕┤р╣Ар╕кр╕Ш** (р╣Бр╕Фр╕З)

---

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 2: р╕Чр╕Фр╕кр╕нр╕Ър╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М (Accept)

1. **р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╕гр╕▒р╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣М"**
   - р╕Бр╕Фр╕Ыр╕╕р╣Ир╕бр╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з "р╕гр╕▒р╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣М"
   - р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щр╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б: "р╕гр╕▒р╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з! р╣Ар╕гр╕┤р╣Ир╕бр╕Ир╕▒р╕Ър╣Ар╕зр╕ер╕▓ 10 р╕Щр╕▓р╕Чр╕╡"

2. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕Цр╕▓р╕Щр╕░**
   - р╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ: **р╕Бр╕│р╕ер╕▒р╕Зр╣Ар╕Хр╕гр╕╡р╕вр╕б** (р╕кр╕╡р╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щ)
   - р╕Ыр╕гр╕▓р╕Бр╕П Timer р╕Щр╕▒р╕Ър╕Цр╕нр╕вр╕лр╕ер╕▒р╕З: "р╣Ар╕лр╕ер╕╖р╕нр╣Ар╕зр╕ер╕▓: 9:59"
   - Progress bar р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕зр╣Ар╕гр╕┤р╣Ир╕бр╣Ар╕Др╕ер╕╖р╣Ир╕нр╕Щр╣Др╕лр╕з
   - р╕Ыр╕╕р╣Ир╕бр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ: **р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ**

3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Щ Firestore Console**
   - р╣Ар╕Ыр╕┤р╕Ф Firebase Console тЖТ Firestore тЖТ `orders` collection
   - р╕лр╕▓р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Чр╕╡р╣Ир╣Ар╕Юр╕┤р╣Ир╕Зр╕кр╕гр╣Йр╕▓р╕З
   - р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ fields:
     - `status`: "preparing"
     - `acceptedAt`: р╕бр╕╡ timestamp
     - `preparingStartTime`: р╕бр╕╡ timestamp
     - `notificationStatus.at5min`: false
     - `notificationStatus.at7_5min`: false
     - `notificationStatus.at10min`: false

---

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 3: р╕Чр╕Фр╕кр╕нр╕Ъ Timer р╣Бр╕ер╕░р╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ

тП░ **р╣Ар╕зр╕ер╕▓ 0-5 р╕Щр╕▓р╕Чр╕╡: р╕гр╕░р╕вр╕░р╕Ыр╕Бр╕Хр╕┤**
- Timer р╕Щр╕▒р╕Ър╕Цр╕нр╕вр╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Б 10:00 тЖТ 5:00
- Progress bar р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з
- р╣Др╕бр╣Ир╕бр╕╡р╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ

тП░ **р╕Щр╕▓р╕Чр╕╡р╕Чр╕╡р╣И 5: р╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕Др╕гр╕▒р╣Йр╕Зр╣Бр╕гр╕Б**
- **р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Др╕зр╕гр╣Ар╕Бр╕┤р╕Ф (р╕Цр╣Йр╕▓ Cloud Functions р╕Чр╕│р╕Зр╕▓р╕Щ):**
  - р╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification: "тП░ р╣Ар╕лр╕ер╕╖р╕нр╣Ар╕зр╕ер╕▓ 5 р╕Щр╕▓р╕Чр╕╡"
  - р╣Гр╕Щ Firestore: `notificationStatus.at5min` = true

тП░ **р╕Щр╕▓р╕Чр╕╡р╕Чр╕╡р╣И 7.5: р╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щр╕Др╕гр╕▒р╣Йр╕Зр╕Чр╕╡р╣Ир╕кр╕нр╕З**
- **р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Др╕зр╕гр╣Ар╕Бр╕┤р╕Ф (р╕Цр╣Йр╕▓ Cloud Functions р╕Чр╕│р╕Зр╕▓р╕Щ):**
  - р╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification: "тЪая╕П р╣Ар╕лр╕ер╕╖р╕нр╣Ар╕зр╕ер╕▓ 2.5 р╕Щр╕▓р╕Чр╕╡"
  - р╣Гр╕Щ Firestore: `notificationStatus.at7_5min` = true
- Timer р╣Бр╕кр╕Фр╕З: "р╣Ар╕лр╕ер╕╖р╕нр╣Ар╕зр╕ер╕▓: 2:30"
- Progress bar р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щр╕кр╕╡р╕кр╣Йр╕б

тП░ **р╕Щр╕▓р╕Чр╕╡р╕Чр╕╡р╣И 10: р╣Ар╕Бр╕┤р╕Щр╣Ар╕зр╕ер╕▓**
- **р╕кр╕┤р╣Ир╕Зр╕Чр╕╡р╣Ир╕Др╕зр╕гр╣Ар╕Бр╕┤р╕Ф:**
  - Timer р╣Бр╕кр╕Фр╕З: "р╣Ар╕Бр╕┤р╕Щр╣Ар╕зр╕ер╕▓ 0:00" (р╕кр╕╡р╣Бр╕Фр╕З)
  - р╣Бр╕кр╕Фр╕Зр╕Др╣Ир╕▓р╕Ыр╕гр╕▒р╕Ъ: "р╕Др╣Ир╕▓р╕Ыр╕гр╕▒р╕Ъ: р╕┐0.00" (р╕Др╣Ир╕▓р╕Ыр╕гр╕▒р╕Ър╕Ир╕░р╕Др╕│р╕Щр╕зр╕Ур╕лр╕ер╕▒р╕З 10 р╕Щр╕▓р╕Чр╕╡)
  - Progress bar р╣Ар╕Хр╣Зр╕б 100% р╕кр╕╡р╣Бр╕Фр╕З
  - **р╕Цр╣Йр╕▓ Cloud Functions р╕Чр╕│р╕Зр╕▓р╕Щ:**
    - р╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification: "ЁЯЪи р╣Ар╕Бр╕┤р╕Щр╣Ар╕зр╕ер╕▓р╕Бр╕│р╕лр╕Щр╕Ф"
    - р╣Гр╕Щ Firestore: `notificationStatus.at10min` = true, `isLate` = true

тП░ **р╕лр╕ер╕▒р╕З 15 р╕Щр╕▓р╕Чр╕╡: р╕Др╣Ир╕▓р╕Ыр╕гр╕▒р╕Ър╣Ар╕Юр╕┤р╣Ир╕б**
- р╕Др╣Ир╕▓р╕Ыр╕гр╕▒р╕Ър╕Др╕│р╕Щр╕зр╕Ур╕Чр╕╕р╕Б 5 р╕Щр╕▓р╕Чр╕╡: р╕┐10 р╕Хр╣Ир╕н 5 р╕Щр╕▓р╕Чр╕╡
- р╣Ар╕Бр╕┤р╕Щ 15 р╕Щр╕▓р╕Чр╕╡ тЖТ р╕Др╣Ир╕▓р╕Ыр╕гр╕▒р╕Ъ р╕┐10
- р╣Ар╕Бр╕┤р╕Щ 20 р╕Щр╕▓р╕Чр╕╡ тЖТ р╕Др╣Ир╕▓р╕Ыр╕гр╕▒р╕Ъ р╕┐20
- р╣Бр╕кр╕Фр╕Зр╣Гр╕Щ UI: "р╣Ар╕Бр╕┤р╕Щр╣Ар╕зр╕ер╕▓ 5:23 (р╕Др╣Ир╕▓р╕Ыр╕гр╕▒р╕Ъ: р╕┐10.00)"

---

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 4: р╕Чр╕Фр╕кр╕нр╕Ър╕Ыр╕╕р╣Ир╕б "р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ"

1. **р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ"**
   - р╕Бр╕Фр╕Ыр╕╕р╣Ир╕бр╕кр╕╡р╕бр╣Ир╕зр╕Зр╣Гр╕Щр╕Бр╕▓р╕гр╣Мр╕Фр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М
   - р╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ: **р╕Юр╕гр╣Йр╕нр╕бр╕кр╣Ир╕З** (р╕кр╕╡р╕бр╣Ир╕зр╕З)
   - Timer р╕лр╕▓р╕вр╣Др╕Ы (р╣Ар╕Юр╕гр╕▓р╕░р╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Ар╕кр╕гр╣Зр╕Ир╣Бр╕ер╣Йр╕з)

2. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Ыр╕╕р╣Ир╕б "р╣Бр╕кр╕Фр╕З QR Code"**
   - р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щр╕Ыр╕╕р╣Ир╕б **р╣Бр╕кр╕Фр╕З QR Code** р╕кр╕╡р╕бр╣Ир╕зр╕З
   - р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕бр╕Фр╣Йр╕▓р╕Щр╕ер╣Ир╕▓р╕З: "р╕гр╕нр╕Юр╕Щр╕▒р╕Бр╕Зр╕▓р╕Щр╕Вр╕Щр╕кр╣Ир╕Зр╕бр╕▓р╕гр╕▒р╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓"

3. **р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╣Бр╕кр╕Фр╕З QR Code"**
   - р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б тЖТ р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓ OrderQRScreen
   - р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ QR 2 р╕нр╕▒р╕Щ:
     - **QR р╕кр╕┤р╕Щр╕Др╣Йр╕▓** (р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з): ORDER:xxxxxxxx
     - **QR р╕Юр╕┤р╕Бр╕▒р╕Фр╕ер╕╣р╕Бр╕Др╣Йр╕▓** (р╕кр╕╡р╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щ): LOCATION:xxxxxxxx

4. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Щ Firestore**
   - `status`: "ready"
   - `readyAt`: р╕бр╕╡ timestamp
   - `orderQRCode`: "ORDER:xxxxxxxx"
   - `locationQRCode`: "LOCATION:xxxxxxxx"

---

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 5: р╕Чр╕Фр╕кр╕нр╕Ър╕кр╣Бр╕Бр╕Щ QR (р╣Др╕гр╣Ар╕Фр╕нр╕гр╣Мр╕гр╕▒р╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓)

1. **р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓р╕кр╣Бр╕Бр╕Щ QR**
   - р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б ЁЯУ╖ (qr_code_scanner) р╣Гр╕Щр╣Ар╕бр╕Щр╕╣р╕ер╣Ир╕▓р╕З
   - р╕Ир╕░р╣Ар╕Ыр╕┤р╕Фр╕Бр╕ер╣Йр╕нр╕Зр╕кр╕│р╕лр╕гр╕▒р╕Ър╕кр╣Бр╕Бр╕Щ

2. **р╕кр╣Бр╕Бр╕Щ Order QR**
   - р╕Щр╕│р╕Бр╕ер╣Йр╕нр╕Зр╣Др╕Ыр╕кр╣Бр╕Бр╕Щ **QR р╕кр╕┤р╕Щр╕Др╣Йр╕▓** (р╕кр╕╡р╣Ар╕Вр╕╡р╕вр╕з)
   - р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ Dialog:
     - тЬЕ **р╣Ар╕гр╕┤р╣Ир╕бр╕Ир╕▒р╕Фр╕кр╣Ир╕Зр╣Бр╕ер╣Йр╕з**
     - "р╕нр╕нр╣Ар╕Фр╕нр╕гр╣М: #xxxxxxxx"
     - "р╕Ыр╕ер╕▓р╕вр╕Чр╕▓р╕З: 456 р╕Цр╕Щр╕Щр╕ер╕╣р╕Бр╕Др╣Йр╕▓"
     - "р╣Ар╕бр╕╖р╣Ир╕нр╕Цр╕╢р╕Зр╕Ир╕╕р╕Фр╕лр╕бр╕▓р╕вр╣Бр╕ер╣Йр╕з р╣Гр╕лр╣Йр╕кр╣Бр╕Бр╕Щ QR р╕Юр╕┤р╕Бр╕▒р╕Фр╕Вр╕нр╕Зр╕ер╕╣р╕Бр╕Др╣Йр╕▓"

3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕Цр╕▓р╕Щр╕░**
   - р╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ: **р╕Бр╕│р╕ер╕▒р╕Зр╕Ир╕▒р╕Фр╕кр╣Ир╕З** (р╕кр╕╡р╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щ)
   - р╕Вр╣Йр╕нр╕Др╕зр╕▓р╕б: "р╕Бр╕│р╕ер╕▒р╕Зр╕Ир╕▒р╕Фр╕кр╣Ир╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓"

4. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Щ Firestore**
   - `status`: "delivering"
   - `deliveryStartTime`: р╕бр╕╡ timestamp
   - `driverId`: р╕бр╕╡ user uid
   - `scannedByDriverId`: р╕бр╕╡ user uid
   - `scannedAt`: р╕бр╕╡ timestamp

---

### р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щр╕Чр╕╡р╣И 6: р╕Чр╕Фр╕кр╕нр╕Ър╕кр╣Бр╕Бр╕Щ QR (р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕гр╕▒р╕Ър╕кр╕┤р╕Щр╕Др╣Йр╕▓)

1. **р╕кр╣Бр╕Бр╕Щ Location QR**
   - р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╕кр╣Бр╕Бр╕Щ QR р╕нр╕╡р╕Бр╕Др╕гр╕▒р╣Йр╕З
   - р╕кр╣Бр╕Бр╕Щ **QR р╕Юр╕┤р╕Бр╕▒р╕Фр╕ер╕╣р╕Бр╕Др╣Йр╕▓** (р╕кр╕╡р╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щ)
   - р╕Др╕зр╕гр╣Ар╕лр╣Зр╕Щ Dialog:
     - ЁЯОЙ **р╕кр╣Ир╕Зр╕кр╕│р╣Ар╕гр╣Зр╕И!**
     - "р╕нр╕нр╣Ар╕Фр╕нр╕гр╣М: #xxxxxxxx"
     - "р╕кр╣Ир╕Зр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Ар╕гр╕╡р╕вр╕Ър╕гр╣Йр╕нр╕вр╣Бр╕ер╣Йр╕з"

2. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕Цр╕▓р╕Щр╕░**
   - р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕лр╕▓р╕вр╣Др╕Ыр╕Ир╕▓р╕Бр╕гр╕▓р╕вр╕Бр╕▓р╕г (р╣Ар╕Юр╕гр╕▓р╕░р╕кр╕Цр╕▓р╕Щр╕░р╣Др╕бр╣Ир╣Гр╕Кр╣И pending-delivering р╣Бр╕ер╣Йр╕з)

3. **р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╣Гр╕Щ Firestore**
   - `status`: "delivered"
   - `deliveredAt`: р╕бр╕╡ timestamp

---

## ЁЯФН Checklist р╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

### тЬЕ р╕кр╕гр╣Йр╕▓р╕Зр╣Бр╕ер╕░р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М
- [ ] р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б тЮХ р╕кр╕гр╣Йр╕▓р╕Зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╣Бр╕кр╕Фр╕Зр╕кр╕Цр╕▓р╕Щр╕░ "р╕гр╕нр╕нр╕Щр╕╕р╕бр╕▒р╕Хр╕┤" (р╕кр╕╡р╕кр╣Йр╕б)
- [ ] р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╕гр╕▒р╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣М" р╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] р╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ "р╕Бр╕│р╕ер╕▒р╕Зр╣Ар╕Хр╕гр╕╡р╕вр╕б" (р╕кр╕╡р╕Щр╣Йр╕│р╣Ар╕Зр╕┤р╕Щ)
- [ ] Timer р╣Ар╕гр╕┤р╣Ир╕бр╕Щр╕▒р╕Ър╕Цр╕нр╕вр╕лр╕ер╕▒р╕Зр╕Ир╕▓р╕Б 10:00

### тЬЕ р╕Чр╕Фр╕кр╕нр╕Ъ Timer
- [ ] Timer р╕Щр╕▒р╕Ър╕Цр╕нр╕вр╕лр╕ер╕▒р╕Зр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
- [ ] Progress bar р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╕кр╕╡р╕Хр╕▓р╕бр╣Ар╕зр╕ер╕▓ (р╣Ар╕Вр╕╡р╕вр╕з тЖТ р╕кр╣Йр╕б тЖТ р╣Бр╕Фр╕З)
- [ ] р╣Ар╕бр╕╖р╣Ир╕нр╣Ар╕Бр╕┤р╕Щ 10 р╕Щр╕▓р╕Чр╕╡ р╣Бр╕кр╕Фр╕З "р╣Ар╕Бр╕┤р╕Щр╣Ар╕зр╕ер╕▓" р╕кр╕╡р╣Бр╕Фр╕З
- [ ] р╕Др╣Ир╕▓р╕Ыр╕гр╕▒р╕Ър╕Др╕│р╕Щр╕зр╕Ур╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З (р╕┐10 р╕Чр╕╕р╕Б 5 р╕Щр╕▓р╕Чр╕╡)

### тЬЕ р╕Чр╕Фр╕кр╕нр╕Ър╕Ыр╕╕р╣Ир╕бр╣Ар╕Хр╕гр╕╡р╕вр╕бр╣Ар╕кр╕гр╣Зр╕И
- [ ] р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╣Ар╕Хр╕гр╕╡р╕вр╕бр╕кр╕┤р╕Щр╕Др╣Йр╕▓р╣Ар╕кр╕гр╣Зр╕Ир╕кр╕┤р╣Йр╕Щ" р╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] р╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ "р╕Юр╕гр╣Йр╕нр╕бр╕кр╣Ир╕З" (р╕кр╕╡р╕бр╣Ир╕зр╕З)
- [ ] р╕Ыр╕╕р╣Ир╕б "р╣Бр╕кр╕Фр╕З QR Code" р╕Ыр╕гр╕▓р╕Бр╕П

### тЬЕ р╕Чр╕Фр╕кр╕нр╕Ъ QR Code
- [ ] р╕Бр╕Фр╕Ыр╕╕р╣Ир╕б "р╣Бр╕кр╕Фр╕З QR Code" р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓ OrderQRScreen
- [ ] р╣Ар╕лр╣Зр╕Щ QR р╕кр╕┤р╕Щр╕Др╣Йр╕▓ (ORDER:xxxx)
- [ ] р╣Ар╕лр╣Зр╕Щ QR р╕Юр╕┤р╕Бр╕▒р╕Ф (LOCATION:xxxx)

### тЬЕ р╕Чр╕Фр╕кр╕нр╕Ър╕кр╣Бр╕Бр╕Щ QR
- [ ] р╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓р╕кр╣Бр╕Бр╕Щ QR р╣Др╕Фр╣Й (р╕Бр╕ер╣Йр╕нр╕Зр╕Чр╕│р╕Зр╕▓р╕Щ)
- [ ] р╕кр╣Бр╕Бр╕Щ Order QR р╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] р╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ "р╕Бр╕│р╕ер╕▒р╕Зр╕Ир╕▒р╕Фр╕кр╣Ир╕З"
- [ ] р╕кр╣Бр╕Бр╕Щ Location QR р╕кр╕│р╣Ар╕гр╣Зр╕И
- [ ] р╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Ар╕Ыр╣Зр╕Щ "р╕кр╣Ир╕Зр╕кр╕│р╣Ар╕гр╣Зр╕И"
- [ ] р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕лр╕▓р╕вр╕Ир╕▓р╕Бр╕гр╕▓р╕вр╕Бр╕▓р╕г

### тЬЕ р╕Чр╕Фр╕кр╕нр╕Ър╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ (р╕Хр╣Йр╕нр╕З Deploy Cloud Functions)
- [ ] р╕Щр╕▓р╕Чр╕╡р╕Чр╕╡р╣И 5: р╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification "тП░ р╣Ар╕лр╕ер╕╖р╕нр╣Ар╕зр╕ер╕▓ 5 р╕Щр╕▓р╕Чр╕╡"
- [ ] р╕Щр╕▓р╕Чр╕╡р╕Чр╕╡р╣И 7.5: р╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification "тЪая╕П р╣Ар╕лр╕ер╕╖р╕нр╣Ар╕зр╕ер╕▓ 2.5 р╕Щр╕▓р╕Чр╕╡"
- [ ] р╕Щр╕▓р╕Чр╕╡р╕Чр╕╡р╣И 10: р╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification "ЁЯЪи р╣Ар╕Бр╕┤р╕Щр╣Ар╕зр╕ер╕▓р╕Бр╕│р╕лр╕Щр╕Ф"
- [ ] р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╣Зр╕Щ ready: р╣Др╕гр╣Ар╕Фр╕нр╕гр╣Мр╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification
- [ ] р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╣Зр╕Щ delivering: р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification
- [ ] р╣Ар╕бр╕╖р╣Ир╕нр╕кр╕Цр╕▓р╕Щр╕░р╣Ар╕Ыр╣Зр╕Щ delivered: р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification

---

## ЁЯРЫ р╕Бр╕▓р╕гр╣Бр╕Бр╣Йр╕Ыр╕▒р╕Нр╕лр╕▓р╕Чр╕╡р╣Ир╕Юр╕Ър╕Ър╣Ир╕нр╕в

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╕кр╕гр╣Йр╕▓р╕Зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╣Др╕бр╣Ир╕кр╕│р╣Ар╕гр╣Зр╕И
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ login р╣Бр╕ер╣Йр╕зр╕лр╕гр╕╖р╕нр╕вр╕▒р╕З
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ internet connection
- р╕Фр╕╣ error р╣Гр╕Щ console

### р╕Ыр╕▒р╕Нр╕лр╕▓: Timer р╣Др╕бр╣Ир╕Щр╕▒р╕Ър╕Цр╕нр╕вр╕лр╕ер╕▒р╕З
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ `acceptedAt` р╕бр╕╡ timestamp р╣Гр╕Щ Firestore
- р╕ер╕нр╕З scroll р╕гр╕▓р╕вр╕Бр╕▓р╕гр╕Вр╕╢р╣Йр╕Щр╕ер╕З (р╣Ар╕Юр╕╖р╣Ир╕н trigger setState)
- р╕Ыр╕┤р╕Фр╣Бр╕ер╣Йр╕зр╣Ар╕Ыр╕┤р╕Фр╕лр╕Щр╣Йр╕▓р╣Гр╕лр╕бр╣И

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╕кр╣Бр╕Бр╕Щ QR р╣Др╕бр╣Ир╕Чр╕│р╕Зр╕▓р╕Щ
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ permission р╕Бр╕ер╣Йр╕нр╕З
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ QR format р╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З (ORDER:xxxx р╕лр╕гр╕╖р╕н LOCATION:xxxx)
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓р╕кр╕Цр╕▓р╕Щр╕░р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Цр╕╣р╕Бр╕Хр╣Йр╕нр╕З
  - р╕кр╣Бр╕Бр╕Щ Order QR: р╕Хр╣Йр╕нр╕Зр╣Ар╕Ыр╣Зр╕Щ "ready"
  - р╕кр╣Бр╕Бр╕Щ Location QR: р╕Хр╣Йр╕нр╕Зр╣Ар╕Ыр╣Зр╕Щ "delivering"

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╣Др╕бр╣Ир╣Др╕Фр╣Йр╕гр╕▒р╕Ъ notification
**р╕зр╕┤р╕Шр╕╡р╣Бр╕Бр╣Й:**
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ър╕зр╣Ир╕▓ deploy Cloud Functions р╣Бр╕ер╣Йр╕з
- р╕Хр╕гр╕зр╕Ир╕кр╕нр╕Ъ FCM token р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╣Гр╕Щ Firestore
- р╕Фр╕╣ logs р╣Гр╕Щ Firebase Console тЖТ Functions тЖТ Logs

### р╕Ыр╕▒р╕Нр╕лр╕▓: р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕лр╕▓р╕вр╕Ир╕▓р╕Бр╕гр╕▓р╕вр╕Бр╕▓р╕г
**р╣Ар╕Ыр╣Зр╕Щр╣Ар╕гр╕╖р╣Ир╕нр╕Зр╕Ыр╕Бр╕Хр╕┤** - р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Ир╕░р╣Бр╕кр╕Фр╕Зр╣Ар╕Йр╕Юр╕▓р╕░р╕кр╕Цр╕▓р╕Щр╕░:
- pending, accepted, preparing, ready, delivering

р╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Чр╕╡р╣Ир╕кр╕Цр╕▓р╕Щр╕░ "delivered" р╕лр╕гр╕╖р╕н "cancelled" р╕Ир╕░р╣Др╕бр╣Ир╣Бр╕кр╕Фр╕З

---

## ЁЯУК р╕Хр╕▒р╕зр╕нр╕вр╣Ир╕▓р╕Зр╕Вр╣Йр╕нр╕бр╕╣р╕ер╣Гр╕Щ Firestore

```json
{
  "orderId": "abc123xyz456",
  "status": "preparing",
  "createdAt": "2025-11-13T10:00:00Z",
  "acceptedAt": "2025-11-13T10:01:00Z",
  "preparingStartTime": "2025-11-13T10:01:00Z",
  "shopId": "user_uid_123",
  "shopName": "р╕гр╣Йр╕▓р╕Щр╕Чр╕Фр╕кр╕нр╕Ъ",
  "customerName": "р╕ер╕╣р╕Бр╕Др╣Йр╕▓р╕Чр╕Фр╕кр╕нр╕Ъ",
  "total": 230,
  "penalty": 0,
  "orderQRCode": "ORDER:abc123xyz456",
  "locationQRCode": "LOCATION:abc123xyz456",
  "notificationStatus": {
    "at5min": false,
    "at7_5min": false,
    "at10min": false
  },
  "isLate": false
}
```

---

## ЁЯУЭ р╕Ър╕▒р╕Щр╕Чр╕╢р╕Бр╕Бр╕▓р╕гр╕Чр╕Фр╕кр╕нр╕Ъ

**р╕зр╕▒р╕Щр╕Чр╕╡р╣И:** _____________  
**р╕Ьр╕╣р╣Йр╕Чр╕Фр╕кр╕нр╕Ъ:** _____________

| р╕Вр╕▒р╣Йр╕Щр╕Хр╕нр╕Щ | р╕кр╕Цр╕▓р╕Щр╕░ | р╕лр╕бр╕▓р╕вр╣Ар╕лр╕Хр╕╕ |
|---------|-------|----------|
| р╕кр╕гр╣Йр╕▓р╕Зр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М | тмЬ Pass тмЬ Fail | |
| р╕вр╕╖р╕Щр╕вр╕▒р╕Щр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М | тмЬ Pass тмЬ Fail | |
| Timer р╕Щр╕▒р╕Ър╕Цр╕нр╕вр╕лр╕ер╕▒р╕З | тмЬ Pass тмЬ Fail | |
| р╣Бр╕кр╕Фр╕З QR Code | тмЬ Pass тмЬ Fail | |
| р╕кр╣Бр╕Бр╕Щ Order QR | тмЬ Pass тмЬ Fail | |
| р╕кр╣Бр╕Бр╕Щ Location QR | тмЬ Pass тмЬ Fail | |
| р╕Бр╕▓р╕гр╣Бр╕Ир╣Йр╕Зр╣Ар╕Хр╕╖р╕нр╕Щ | тмЬ Pass тмЬ Fail | р╕Хр╣Йр╕нр╕З deploy functions |

---

## ЁЯОУ р╣Ар╕Др╕ер╣Зр╕Фр╕ер╕▒р╕Ъ

1. **р╕Чр╕Фр╕кр╕нр╕Ър╣Бр╕Ър╕Ър╣Ар╕гр╣Зр╕з**: р╣Бр╕Бр╣Й `preparingDuration` р╣Гр╕Щ order_model.dart р╕Ир╕▓р╕Б 600000 (10 р╕Щр╕▓р╕Чр╕╡) р╣Ар╕Ыр╣Зр╕Щ 60000 (1 р╕Щр╕▓р╕Чр╕╡)
2. **р╕Фр╕╣р╕Вр╣Йр╕нр╕бр╕╣р╕е Real-time**: р╣Ар╕Ыр╕┤р╕Ф Firestore Console р╣Др╕зр╣Йр╕Вр╣Йр╕▓р╕Зр╣Ж р╣Ар╕Юр╕╖р╣Ир╕нр╕Фр╕╣р╕Бр╕▓р╕гр╣Ар╕Ыр╕ер╕╡р╣Ир╕вр╕Щр╣Бр╕Ыр╕ер╕З
3. **р╕ер╕Ър╕нр╕нр╣Ар╕Фр╕нр╕гр╣Мр╕Чр╕Фр╕кр╕нр╕Ъ**: р╕ер╕Ър╣Др╕Фр╣Йр╣Вр╕Фр╕вр╕Хр╕гр╕Зр╣Гр╕Щ Firestore Console
4. **р╕кр╕гр╣Йр╕▓р╕Зр╕лр╕ер╕▓р╕вр╕нр╕нр╣Ар╕Фр╕нр╕гр╣М**: р╣Ар╕гр╕╡р╕вр╕Б `createMultipleTestOrders()` р╣Гр╕Щ test_order_helper.dart

Happy Testing! ЁЯЪА
